import{r as e,j as a}from"./index-3K9F4zBO.js";const s=()=>{const[s,t]=e.useState([]),[n,i]=e.useState({title:"",amount:"",category:""}),[c,l]=e.useState(!1),r=localStorage.getItem("token"),o=async()=>{try{const e=await fetch("http://localhost:5000/api/expenses",{headers:{Authorization:`Bearer ${r}`}}),a=await e.json();console.log("Raw data: ",a),t(a)}catch(e){console.error("Failed to load expenses:",e)}};e.useEffect(()=>{o()},[]),e.useEffect(()=>{console.log("Fetched expense:",s)},[s]);const d=e=>{i({...n,[e.target.name]:e.target.value})};return a.jsxs("div",{className:"p-4 max-w-xl mx-auto text-black",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Expenses"}),a.jsx("ul",{className:"space-y-2",children:s.map(e=>a.jsxs("li",{className:"flex justify-between items-center border-b py-2",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium",children:[e.title," - â‚¦",e.amount]}),a.jsx("small",{className:"text-gray-600",children:e.category})]}),a.jsx("button",{onClick:()=>(async e=>{try{if(!(await fetch(`http://localhost:5000/api/expenses/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${r}`}})).ok)throw new Error("Failed to delete");o()}catch(a){console.error(a)}})(e.id),className:"text-red-600 hover:underline text-sm",children:"Delete"})]},e.id))}),a.jsxs("div",{className:"finance-section fade-in",children:[a.jsx("div",{className:"section-title",children:a.jsxs("h2",{children:[a.jsx("i",{className:"fas fa-exchange-alt"})," Transactions"]})}),a.jsxs("form",{className:"transaction-form",onSubmit:async e=>{e.preventDefault(),l(!0);try{if(!(await fetch("http://localhost:5000/api/expenses",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(n)})).ok)throw new Error("Failed to add expense");i({title:"",amount:"",category:""}),o()}catch(a){console.error("Add expense failed:",a)}finally{l(!1)}},children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"transactionType",children:"Type"}),a.jsxs("select",{id:"transactionType",children:[a.jsx("option",{value:"expense",children:"Expense"}),a.jsx("option",{value:"income",children:"Income"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"transactionAmount",children:"Amount ($)"}),a.jsx("input",{type:"number",name:"amount",value:n.amount,onChange:d,id:"transactionAmount",placeholder:"Enter amount"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"transactionCategory",children:"Category"}),a.jsxs("select",{id:"transactionCategory",type:"text",name:"category",placeholder:"Category",value:n.category,onChange:d,children:[a.jsx("option",{value:"food",children:"Food"}),a.jsx("option",{value:"transport",children:"Transportation"}),a.jsx("option",{value:"housing",children:"Housing"}),a.jsx("option",{value:"entertainment",children:"Entertainment"}),a.jsx("option",{value:"education",children:"Education"}),a.jsx("option",{value:"shopping",children:"Shopping"}),a.jsx("option",{value:"other",children:"Other"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"transactionDate",children:"Date"}),a.jsx("input",{type:"date",id:"transactionDate"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"transactionDescription",children:"Description"}),a.jsx("input",{type:"text",id:"transactionDescription",name:"title",value:n.title,onChange:d,placeholder:"Enter description"})]}),a.jsxs("button",{type:"submit",className:"btn btn-full",children:[a.jsx("i",{className:"fas fa-plus"})," Add Transaction"]})]}),a.jsx("h3",{style:{marginBottom:"1rem"},children:"Recent Transactions"}),a.jsxs("ul",{className:"transaction-list",children:[a.jsxs("li",{className:"transaction-item expense fade-in",children:[a.jsx("div",{className:"transaction-icon",children:a.jsx("i",{className:"fas fa-utensils"})}),a.jsxs("div",{className:"transaction-details",children:[a.jsx("div",{className:"transaction-title",children:"Campus Cafe"}),a.jsx("div",{className:"transaction-category",children:"Food"}),a.jsxs("div",{className:"transaction-meta",children:[a.jsx("div",{className:"transaction-amount",children:"-$12.50"}),a.jsx("div",{className:"transaction-date",children:"Today, 12:30 PM"})]})]})]}),a.jsxs("li",{className:"transaction-item income fade-in",children:[a.jsx("div",{className:"transaction-icon",children:a.jsx("i",{className:"fas fa-money-check"})}),a.jsxs("div",{className:"transaction-details",children:[a.jsx("div",{className:"transaction-title",children:"Part-time Job"}),a.jsx("div",{className:"transaction-category",children:"Salary"}),a.jsxs("div",{className:"transaction-meta",children:[a.jsx("div",{className:"transaction-amount",children:"+$300.00"}),a.jsx("div",{className:"transaction-date",children:"Yesterday, 9:00 AM"})]})]})]}),a.jsxs("li",{className:"transaction-item expense fade-in",children:[a.jsx("div",{className:"transaction-icon",children:a.jsx("i",{className:"fas fa-book"})}),a.jsxs("div",{className:"transaction-details",children:[a.jsx("div",{className:"transaction-title",children:"Textbooks"}),a.jsx("div",{className:"transaction-category",children:"Education"}),a.jsxs("div",{className:"transaction-meta",children:[a.jsx("div",{className:"transaction-amount",children:"-$85.75"}),a.jsx("div",{className:"transaction-date",children:"Jul 15, 2023"})]})]})]}),a.jsxs("li",{className:"transaction-item expense fade-in",children:[a.jsx("div",{className:"transaction-icon",children:a.jsx("i",{className:"fas fa-train"})}),a.jsxs("div",{className:"transaction-details",children:[a.jsx("div",{className:"transaction-title",children:"Bus Pass"}),a.jsx("div",{className:"transaction-category",children:"Transportation"}),a.jsxs("div",{className:"transaction-meta",children:[a.jsx("div",{className:"transaction-amount",children:"-$45.00"}),a.jsx("div",{className:"transaction-date",children:"Jul 10, 2023"})]})]})]})]}),a.jsx("div",{style:{textAlign:"center",marginTop:"1.5rem"},children:a.jsxs("button",{className:"btn btn-outline",children:[a.jsx("i",{className:"fas fa-history"})," View All Transactions"]})})]})]})};export{s as default};
//# sourceMappingURL=Expenses-BAmlINWj.js.map
