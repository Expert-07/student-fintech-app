import{r as e,j as t}from"./index-CCLVijXR.js";const a=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],s=["07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00"],r=()=>{const[r,l]=e.useState([]),[d,o]=e.useState(!0),c=async()=>{o(!0);const e=localStorage.getItem("token"),t=localStorage.getItem("userId");try{const a=await fetch(`http://localhost:5000/api/timetable/${t}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();l(s||[])}catch{l([])}o(!1)};e.useEffect(()=>{c()},[]);return t.jsxs("div",{className:"max-w-5xl mx-auto p-4",children:[t.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Weekly Timetable"}),d?t.jsx("p",{className:"text-center",children:"Loading timetable..."}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full border-collapse",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-2 border bg-gray-100 dark:bg-[#1E293B]"}),a.map(e=>t.jsx("th",{className:"p-2 border bg-gray-100 dark:bg-[#1E293B] text-xs md:text-base",children:e},e))]})}),t.jsx("tbody",{children:s.map(e=>t.jsxs("tr",{children:[t.jsx("td",{className:"p-2 border bg-gray-50 dark:bg-[#1E293B] text-xs md:text-base font-semibold",children:e}),a.map(s=>{const l=((e,t)=>r.find(s=>("string"==typeof s.day_of_the_week?s.day_of_the_week:a[s.day_of_the_week])===e&&s.start_time.slice(0,5)===t))(s,e);return t.jsx("td",{className:"p-1 md:p-2 border align-top",children:l?t.jsxs("div",{className:"bg-blue-100 dark:bg-blue-900 rounded p-1 md:p-2 text-xs md:text-sm shadow",children:[t.jsx("div",{className:"font-bold",children:l.course_name||l.activity}),t.jsxs("div",{children:[l.start_time," - ",l.end_time]}),l.location&&t.jsx("div",{className:"text-gray-500",children:l.location}),l.lecturer&&t.jsxs("div",{className:"text-gray-400 text-xs",children:["Lecturer: ",l.lecturer]}),t.jsx("button",{onClick:()=>(async e=>{const t=localStorage.getItem("token");try{if(!(await fetch(`http://localhost:5000/api/timetable/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok)throw new Error("Failed to delete");c()}catch(a){console.error(a)}})(l.id),className:"text-red-400 text-xs",children:"Delete"})]}):null},s+e)})]},e))})]})})]})};export{r as default};
//# sourceMappingURL=Timetable-BtHGNASP.js.map
