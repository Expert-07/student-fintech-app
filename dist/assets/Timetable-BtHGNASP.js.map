{"version":3,"file":"Timetable-BtHGNASP.js","sources":["../../src/pages/Timetable.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\nconst daysOfWeek = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];\r\nconst timeSlots = [\r\n  '07:00', '08:00', '09:00', '10:00', '11:00', '12:00',\r\n  '13:00', '14:00', '15:00', '16:00', '17:00', '18:00'\r\n];\r\n\r\nconst Timetable = () => {\r\n  const [timetable, setTimetable] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Move fetchTimetable outside useEffect\r\n  const fetchTimetable = async () => {\r\n    setLoading(true);\r\n    const token = localStorage.getItem('token');\r\n    const userId = localStorage.getItem('userId');\r\n    try {\r\n      const res = await fetch(`http://localhost:5000/api/timetable/${userId}`, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      const data = await res.json();\r\n      setTimetable(data || []);\r\n    } catch {\r\n      setTimetable([]);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  // Now handleDelete can access fetchTimetable and token\r\n  const handleDelete = async (id) => {\r\n    const token = localStorage.getItem('token');\r\n    try {\r\n      const res = await fetch(`http://localhost:5000/api/timetable/${id}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      if (!res.ok) throw new Error('Failed to delete');\r\n      fetchTimetable();\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchTimetable();\r\n  }, []);\r\n\r\n  // Helper: Find class for a day and time slot\r\n  const getClassForSlot = (day, time) => {\r\n    return timetable.find(\r\n      (item) =>\r\n        (typeof item.day_of_the_week === 'string'\r\n          ? item.day_of_the_week\r\n          : daysOfWeek[item.day_of_the_week]) === day &&\r\n        item.start_time.slice(0, 5) === time\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-5xl mx-auto p-4\">\r\n      <h2 className=\"text-2xl font-bold mb-6 text-center\">Weekly Timetable</h2>\r\n      {loading ? (\r\n        <p className=\"text-center\">Loading timetable...</p>\r\n      ) : (\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"min-w-full border-collapse\">\r\n            <thead>\r\n              <tr>\r\n                <th className=\"p-2 border bg-gray-100 dark:bg-[#1E293B]\"></th>\r\n                {daysOfWeek.map((day) => (\r\n                  <th key={day} className=\"p-2 border bg-gray-100 dark:bg-[#1E293B] text-xs md:text-base\">{day}</th>\r\n                ))}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {timeSlots.map((time) => (\r\n                <tr key={time}>\r\n                  <td className=\"p-2 border bg-gray-50 dark:bg-[#1E293B] text-xs md:text-base font-semibold\">{time}</td>\r\n                  {daysOfWeek.map((day) => {\r\n                    const classItem = getClassForSlot(day, time);\r\n                    return (\r\n                      <td key={day + time} className=\"p-1 md:p-2 border align-top\">\r\n                        {classItem ? (\r\n                          <div className=\"bg-blue-100 dark:bg-blue-900 rounded p-1 md:p-2 text-xs md:text-sm shadow\">\r\n                            <div className=\"font-bold\">{classItem.course_name || classItem.activity}</div>\r\n                            <div>{classItem.start_time} - {classItem.end_time}</div>\r\n                            {classItem.location && (\r\n                              <div className=\"text-gray-500\">{classItem.location}</div>\r\n                            )}\r\n                            {classItem.lecturer && (\r\n                              <div className=\"text-gray-400 text-xs\">Lecturer: {classItem.lecturer}</div>\r\n                            )}\r\n                              <button onClick={() => handleDelete(classItem.id)} className=\"text-red-400 text-xs\">Delete</button>\r\n\r\n                          </div>\r\n                        ) : null}\r\n                      </td>\r\n                    );\r\n                  })}\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Timetable;"],"names":["daysOfWeek","timeSlots","Timetable","timetable","setTimetable","useState","loading","setLoading","fetchTimetable","async","token","localStorage","getItem","userId","res","fetch","headers","Authorization","data","json","useEffect","jsxs","className","children","jsx","map","day","time","classItem","find","item","day_of_the_week","start_time","slice","getClassForSlot","course_name","activity","end_time","location","lecturer","onClick","id","method","ok","Error","err","console","error","handleDelete"],"mappings":"+CAEA,MAAMA,EAAa,CAAC,SAAU,UAAW,YAAa,WAAY,SAAU,WAAY,UAClFC,EAAY,CAChB,QAAS,QAAS,QAAS,QAAS,QAAS,QAC7C,QAAS,QAAS,QAAS,QAAS,QAAS,SAGzCC,EAAY,KAChB,MAAOC,EAAWC,GAAgBC,EAAAA,SAAS,KACpCC,EAASC,GAAcF,EAAAA,UAAS,GAGjCG,EAAiBC,UACrBF,GAAW,GACX,MAAMG,EAAQC,aAAaC,QAAQ,SAC7BC,EAASF,aAAaC,QAAQ,UACpC,IACE,MAAME,QAAYC,MAAM,uCAAuCF,IAAU,CACvEG,QAAS,CAAEC,cAAiB,UAAUP,OAElCQ,QAAaJ,EAAIK,OACvBf,EAAac,GAAQ,GAAE,CAAA,MAEvBd,EAAa,GAAE,CAEjBG,GAAW,IAqBba,EAAAA,UAAU,KACRZ,KACC,IAaH,SACEa,KAAC,MAAA,CAAIC,UAAU,wBACbC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAGF,UAAU,sCAAsCC,SAAA,qBACnDjB,EACCkB,EAAAA,IAAC,IAAA,CAAEF,UAAU,cAAcC,SAAA,yBAE3BC,EAAAA,IAAC,MAAA,CAAIF,UAAU,kBACbC,SAAAF,EAAAA,KAAC,QAAA,CAAMC,UAAU,6BACfC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACCD,gBAAC,KAAA,CACCA,SAAA,GAAAC,IAAC,KAAA,CAAGF,UAAU,6CACbtB,EAAWyB,IAAKC,KACfF,IAAC,MAAaF,UAAU,gEAAiEC,SAAAG,GAAhFA,eAId,QAAA,CACEH,SAAAtB,EAAUwB,IAAKE,UACb,KAAA,CACCJ,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAGF,UAAU,6EAA8EC,SAAAI,IAC3F3B,EAAWyB,IAAKC,IACf,MAAME,EA/BA,EAACF,EAAKC,IACrBxB,EAAU0B,KACdC,IACkC,iBAAzBA,EAAKC,gBACTD,EAAKC,gBACL/B,EAAW8B,EAAKC,oBAAsBL,GAC1CI,EAAKE,WAAWC,MAAM,EAAG,KAAON,GAyBFO,CAAgBR,EAAKC,GACvC,OACEH,EAAAA,IAAC,MAAoBF,UAAU,8BAC5BC,WACCF,EAAAA,KAAC,MAAA,CAAIC,UAAU,4EACbC,SAAA,CAAAC,MAAC,OAAIF,UAAU,YAAaC,SAAAK,EAAUO,aAAeP,EAAUQ,kBAC9D,MAAA,CAAKb,SAAA,CAAAK,EAAUI,WAAW,MAAIJ,EAAUS,YACxCT,EAAUU,UACTd,EAAAA,IAAC,OAAIF,UAAU,gBAAiBC,WAAUe,WAE3CV,EAAUW,UACTlB,OAAC,MAAA,CAAIC,UAAU,wBAAwBC,SAAA,CAAA,aAAWK,EAAUW,YAE5Df,EAAAA,IAAC,SAAA,CAAOgB,QAAS,IAlExB/B,OAAOgC,IAC1B,MAAM/B,EAAQC,aAAaC,QAAQ,SACnC,IAQE,WAPkBG,MAAM,uCAAuC0B,IAAM,CACnEC,OAAQ,SACR1B,QAAS,CACPC,cAAe,UAAUP,QAIpBiC,GAAI,MAAM,IAAIC,MAAM,oBAC7BpC,GAAe,OACRqC,GACPC,QAAQC,MAAMF,EAAG,GAqD8BG,CAAapB,EAAUa,IAAKnB,UAAU,uBAAuBC,SAAA,cAGtF,MAdGG,EAAMC,OALZA"}