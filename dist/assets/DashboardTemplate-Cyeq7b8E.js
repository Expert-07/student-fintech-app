import{r as e,j as s}from"./index-BIGPdA-j.js";import{S as a}from"./SideBar-ZYITW8f1.js";import{u as i,j as t}from"./useWeeklySummary-CFuOppbQ.js";import l from"./SmartReminders-BPqfiZ_y.js";const c=({onClose:a})=>{const[i,t]=e.useState({course_name:"",day_of_the_week:"",start_time:"",end_time:"",location:"",lecturer:""}),l=e=>{t({...i,[e.target.name]:e.target.value})};return s.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{const e=await fetch("http://localhost:5000/api/timetable",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(i)}),s=await e.json();e.ok?(alert("Timetable entry added!"),t({course_name:"",day_of_the_week:"",start_time:"",end_time:"",location:"",lecturer:""})):alert(s.message||"Failed to add entry")}catch(s){console.error(s)}},className:"relative text-black space-y-4 p-4 max-w-md mx-auto bg-white rounded shadow",children:[a&&s.jsx("button",{type:"button",onClick:a,className:"absolute top-2 right-3 text-gray-500 hover:text-red-500 text-2xl font-bold focus:outline-none",title:"Close",children:"×"}),s.jsx("h2",{className:"text-xl font-bold",children:"Add Timetable Entry"}),s.jsx("input",{type:"text",name:"course_name",placeholder:"Course Name",value:i.course_name,onChange:l,className:"w-full p-2 border rounded",required:!0}),s.jsxs("select",{name:"day_of_the_week",value:i.day_of_the_week,onChange:l,className:"w-full p-2 border rounded",required:!0,children:[s.jsx("option",{value:"",children:"Select Day"}),["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map(e=>s.jsx("option",{value:e,children:e},e))]}),s.jsx("input",{type:"time",name:"start_time",value:i.start_time,onChange:l,className:"w-full p-2 border rounded",required:!0}),s.jsx("input",{type:"time",name:"end_time",value:i.end_time,onChange:l,className:"w-full p-2 border rounded",required:!0}),s.jsx("input",{type:"text",name:"location",placeholder:"Location (optional)",value:i.location,onChange:l,className:"w-full p-2 border rounded"}),s.jsx("input",{type:"text",name:"lecturer_name",placeholder:"Lecturer Name (optional)",value:i.lecturer_name,onChange:l,className:"w-full p-2 border rounded"}),s.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700",children:"Add to Timetable"})]})},r=()=>setShowModal(!1);function n(){const[n,d]=e.useState(null),[o,m]=e.useState(""),[h,x]=e.useState(null),[j,v]=e.useState(null),[N,g]=e.useState(!1),[p,u]=e.useState(0),[f,y]=e.useState({reading:78,savings:1250,streak:14,achievements:18}),{summary:b,loading:w}=i();console.log("Weekly summary:",b),e.useEffect(()=>{const e=localStorage.getItem("token");if(!e)return;const s=t(e);x(s.id),v(s),k(e)},[]);const k=async e=>{try{const s=await fetch("http://localhost:5000/api/wallet",{headers:{Authorization:`Bearer ${e}`}}),a=await s.json();s.ok?d(a):console.error("Error fetching wallet:",a.message)}catch(s){console.error("Fetch wallet failed:",s)}};return e.useEffect(()=>{const e=document.getElementById("menuToggle"),s=document.getElementById("sidebar");e&&s&&e.addEventListener("click",()=>{s.classList.toggle("active")});const a=document.getElementById("searchToggle"),i=document.getElementById("searchBar");a&&i&&a.addEventListener("click",()=>{i.classList.toggle("active")})},[]),e.useEffect(()=>{(async()=>{const e=localStorage.getItem("token"),s=localStorage.getItem("userId");if(e&&s)try{const a=await fetch(`http://localhost:5000/api/timetable/today/${s}`,{headers:{Authorization:`Bearer ${e}`}}),i=await a.json();Array.isArray(i)?u(i.length):u(0)}catch{u(0)}})()},[]),s.jsxs("div",{className:"dashboard-layout",children:[s.jsx(a,{}),s.jsxs("main",{className:"main-content",children:[s.jsxs("header",{className:"dashboard-header",children:[s.jsx("button",{className:"menu-toggle",id:"menuToggle",children:s.jsx("i",{className:"fas fa-bars"})}),s.jsxs("div",{className:"search-bar",id:"searchBar",children:[s.jsx("i",{className:"fas fa-search"}),s.jsx("input",{type:"text",placeholder:"Search..."})]}),s.jsxs("div",{className:"search-profile",children:[s.jsx("button",{className:"search-toggle",id:"searchToggle",children:s.jsx("i",{className:"fas fa-search"})}),s.jsxs("div",{className:"profile-dropdown",children:[s.jsx("div",{className:"notification-badge",children:p}),s.jsx("span",{children:j?.name}),s.jsx("i",{className:"fas fa-chevron-down"})]})]})]}),s.jsxs("div",{className:"dashboard-content",children:[s.jsxs("div",{className:"welcome-section fade-in",children:[s.jsxs("h1",{children:["Welcome back, ",j?.name,"!"]}),s.jsx("p",{children:"Here's your progress summary for today. You're doing great!"})]}),s.jsxs("div",{className:"stats-grid",children:[s.jsxs("div",{className:"stat-card fade-in",children:[s.jsx("div",{className:"stat-icon",children:s.jsx("i",{className:"fas fa-book-open"})}),s.jsx("div",{className:"stat-title",children:"Reading Progress"}),s.jsxs("div",{className:"stat-value",children:[f.reading,"%"]}),s.jsx("div",{className:"stat-subtext",children:"5/7 chapters completed"})]}),s.jsxs("div",{className:"stat-card fade-in",children:[s.jsx("div",{className:"stat-icon",children:s.jsx("i",{className:"fas fa-wallet"})}),s.jsx("div",{className:"stat-title",children:"Total Savings"}),s.jsx("div",{className:"stat-value",children:n?`₦${Number(n.balance).toLocaleString("en-NG",{minimumFractionDigits:2,maximumFractionDigits:2})}`:"Loading..."}),s.jsxs("div",{className:"stat-subtext",children:[w&&"Loading weekly spend...",!w&&b&&void 0!==b.totalSpent&&s.jsxs("span",{children:["Spent this week: ₦",Number(b.totalSpent).toLocaleString("en-NG",{minimumFractionDigits:2,maximumFractionDigits:2})]}),!w&&(!b||void 0===b.totalSpent)&&s.jsx("span",{children:"Weekly spend unavailable"})]})]}),s.jsxs("div",{className:"stat-card fade-in",children:[s.jsx("div",{className:"stat-icon",children:s.jsx("i",{className:"fas fa-fire"})}),s.jsx("div",{className:"stat-title",children:"Day Streak"}),s.jsx("div",{className:"stat-value",children:f.streak}),s.jsx("div",{className:"stat-subtext",children:"Keep going!"})]}),s.jsxs("div",{className:"stat-card fade-in",children:[s.jsx("div",{className:"stat-icon",children:s.jsx("i",{className:"fas fa-trophy"})}),s.jsx("div",{className:"stat-title",children:"Achievements"}),s.jsx("div",{className:"stat-value",children:f.achievements}),s.jsx("div",{className:"stat-subtext",children:"Master Reader unlocked"})]}),s.jsxs("div",{className:"stat-card fade-in",children:[s.jsx("div",{className:"stat-icon",children:s.jsx("i",{className:"fas fa-trophy"})}),s.jsx("div",{className:"stat-title",children:"Smart Reminder"}),s.jsx("div",{className:"stat-value",children:s.jsx(l,{userId:j?.id})}),s.jsx("div",{className:"stat-subtext",children:"Master Reader unlocked"})]})]}),s.jsxs("div",{className:"section-title",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsxs("h2",{children:[s.jsx("i",{className:"fas fa-bullseye"})," Your Goals"]}),s.jsx("button",{className:"add-timetable-btn",style:{background:"#2563eb",color:"white",border:"none",borderRadius:"6px",padding:"8px 16px",fontWeight:600,cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},onClick:()=>g(!0),children:"+ Add Timetable Entry"})]}),N&&s.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.35)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsxs("div",{style:{background:"white",borderRadius:12,boxShadow:"0 4px 32px rgba(0,0,0,0.18)",padding:0,minWidth:350,maxWidth:"90vw",position:"relative"},children:[s.jsx("button",{onClick:r,style:{position:"absolute",top:10,right:10,background:"transparent",border:"none",fontSize:22,color:"#888",cursor:"pointer",zIndex:2},title:"Close",children:"×"}),s.jsx("div",{style:{padding:24},children:s.jsx(c,{onClose:r})})]})}),s.jsxs("div",{className:"goals-container",children:[s.jsxs("div",{className:"goal-card fade-in",children:[s.jsxs("div",{className:"goal-header",children:[s.jsx("div",{className:"goal-title",children:"Complete CS Textbook"}),s.jsx("div",{className:"goal-badge",children:"Academic"})]}),s.jsxs("div",{className:"progress-container",children:[s.jsxs("div",{className:"progress-info",children:[s.jsx("span",{children:"Progress: 78%"}),s.jsx("span",{children:"3 days left"})]}),s.jsx("div",{className:"progress-bar",children:s.jsx("div",{className:"progress-fill",style:{width:"78%"}})})]}),s.jsxs("div",{className:"goal-meta",children:[s.jsxs("span",{children:[s.jsx("i",{className:"fas fa-book me-1"})," Chapter 5/7"]}),s.jsxs("span",{children:[s.jsx("i",{className:"fas fa-fire me-1 text-danger"})," 5 day streak"]})]})]}),s.jsxs("div",{className:"goal-card fade-in finance",children:[s.jsxs("div",{className:"goal-header",children:[s.jsx("div",{className:"goal-title",children:"New Laptop Fund"}),s.jsx("div",{className:"goal-badge finance-badge",children:"Finance"})]}),s.jsxs("div",{className:"progress-container",children:[s.jsxs("div",{className:"progress-info",children:[s.jsx("span",{children:"Progress: 65%"}),s.jsx("span",{children:"3 weeks left"})]}),s.jsx("div",{className:"progress-bar",children:s.jsx("div",{className:"progress-fill finance-fill",style:{width:"65%"}})})]}),s.jsxs("div",{className:"goal-meta",children:[s.jsxs("span",{children:[s.jsx("i",{className:"fas fa-dollar-sign me-1"})," $325/$500"]}),s.jsxs("span",{children:[s.jsx("i",{className:"fas fa-calendar me-1"})," Aug 30, 2023"]})]})]}),s.jsxs("div",{className:"goal-card fade-in",children:[s.jsxs("div",{className:"goal-header",children:[s.jsx("div",{className:"goal-title",children:"Research Paper Draft"}),s.jsx("div",{className:"goal-badge",children:"Academic"})]}),s.jsxs("div",{className:"progress-container",children:[s.jsxs("div",{className:"progress-info",children:[s.jsx("span",{children:"Progress: 40%"}),s.jsx("span",{children:"2 weeks left"})]}),s.jsx("div",{className:"progress-bar",children:s.jsx("div",{className:"progress-fill",style:{width:"40%"}})})]}),s.jsxs("div",{className:"goal-meta",children:[s.jsxs("span",{children:[s.jsx("i",{className:"fas fa-file-alt me-1"})," 2/5 sections"]}),s.jsxs("span",{children:[s.jsx("i",{className:"fas fa-pencil-alt me-1"})," 500 words/day"]})]})]}),s.jsxs("div",{className:"goal-card fade-in",children:[s.jsxs("div",{className:"goal-header",children:[s.jsx("div",{className:"goal-title",children:"Fitness Challenge"}),s.jsx("div",{className:"goal-badge",children:"Personal"})]}),s.jsxs("div",{className:"progress-container",children:[s.jsxs("div",{className:"progress-info",children:[s.jsx("span",{children:"Progress: 60%"}),s.jsx("span",{children:"10 days left"})]}),s.jsx("div",{className:"progress-bar",children:s.jsx("div",{className:"progress-fill",style:{width:"60%"}})})]}),s.jsxs("div",{className:"goal-meta",children:[s.jsxs("span",{children:[s.jsx("i",{className:"fas fa-dumbbell me-1"})," 12/20 sessions"]}),s.jsxs("span",{children:[s.jsx("i",{className:"fas fa-running me-1"})," Daily workout"]})]})]})]}),s.jsx("div",{className:"section-title",children:s.jsxs("h2",{children:[s.jsx("i",{className:"fas fa-history"})," Recent Activity"]})}),s.jsx("div",{className:"activity-section fade-in",children:s.jsxs("ul",{className:"activity-list",children:[s.jsxs("li",{className:"activity-item",children:[s.jsx("div",{className:"activity-icon",children:s.jsx("i",{className:"fas fa-book"})}),s.jsxs("div",{className:"activity-content",children:[s.jsx("div",{className:"activity-title",children:"Logged reading progress"}),s.jsx("div",{className:"activity-desc",children:"Completed Chapter 5 of Computer Science textbook"}),s.jsx("div",{className:"activity-time",children:"Today, 10:30 AM"})]})]}),s.jsxs("li",{className:"activity-item",children:[s.jsx("div",{className:"activity-icon finance-icon",children:s.jsx("i",{className:"fas fa-dollar-sign"})}),s.jsxs("div",{className:"activity-content",children:[s.jsx("div",{className:"activity-title",children:"Added to savings"}),s.jsx("div",{className:"activity-desc",children:"Deposited $25 to New Laptop Fund"}),s.jsx("div",{className:"activity-time",children:"Yesterday, 4:15 PM"})]})]}),s.jsxs("li",{className:"activity-item",children:[s.jsx("div",{className:"activity-icon",children:s.jsx("i",{className:"fas fa-trophy"})}),s.jsxs("div",{className:"activity-content",children:[s.jsx("div",{className:"activity-title",children:"Achievement unlocked"}),s.jsx("div",{className:"activity-desc",children:"Master Reader - Completed 5 books this semester"}),s.jsx("div",{className:"activity-time",children:"July 8, 2023, 2:40 PM"})]})]}),s.jsxs("li",{className:"activity-item",children:[s.jsx("div",{className:"activity-icon",children:s.jsx("i",{className:"fas fa-check-circle"})}),s.jsxs("div",{className:"activity-content",children:[s.jsx("div",{className:"activity-title",children:"Goal milestone reached"}),s.jsx("div",{className:"activity-desc",children:"Completed 75% of Research Paper Draft"}),s.jsx("div",{className:"activity-time",children:"July 7, 2023, 9:15 AM"})]})]})]})}),s.jsx("div",{className:"section-title",children:s.jsxs("h2",{children:[s.jsx("i",{className:"fas fa-chart-line"})," Progress Analytics"]})}),s.jsxs("div",{className:"charts-section",children:[s.jsxs("div",{className:"chart-container fade-in",children:[s.jsxs("div",{className:"chart-header",children:[s.jsx("h3",{children:"Weekly Progress"}),s.jsxs("select",{className:"time-filter",children:[s.jsx("option",{children:"Last 7 Days"}),s.jsx("option",{children:"Last 30 Days"}),s.jsx("option",{children:"Last 90 Days"})]})]}),s.jsx("div",{className:"chart-placeholder",children:s.jsx("canvas",{id:"progressChart",height:"300"})})]}),s.jsxs("div",{className:"chart-container fade-in",children:[s.jsxs("div",{className:"chart-header",children:[s.jsx("h3",{children:"Savings Overview"}),s.jsxs("select",{className:"time-filter",children:[s.jsx("option",{children:"Monthly"}),s.jsx("option",{children:"Quarterly"}),s.jsx("option",{children:"Yearly"})]})]}),s.jsx("div",{className:"chart-placeholder",children:s.jsx("canvas",{id:"savingsChart",height:"300"})})]})]})]})]})]})}export{n as default};
//# sourceMappingURL=DashboardTemplate-Cyeq7b8E.js.map
